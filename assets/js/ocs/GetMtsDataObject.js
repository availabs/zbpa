function GetMtsDataObjectJsonParseEval(inVal){return eval("("+inVal+")")}function GetMtsDataObject(e,t,n){function p(e){if(c==1)f.innerHTML+=e}function d(e){var t=new Date(e);var n=t.toUTCString();return n}function v(e){var t=new Date(e);var n=t.toUTCString().replace(/^[a-zA-Z]{3}, \d{1,2} [a-zA-Z]{3} \d{4}/g,"");n=n.replace(/:|( GMT)/g,"");n=n.replace(/^\s*|\s*$/g,"");return n}function m(){this[0]=m.arguments.length;for(i=0;i<m.arguments.length;i++){this[i+1]=m.arguments[i]}}function b(e,t,n){if(w(n))return e+y[t];else return e+g[t]}function w(e){if(e/4!=Math.floor(e/4))return false;if(e/100!=Math.floor(e/100))return true;if(e/400!=Math.floor(e/400))return false;return true}var r=this;var s=new Array;var o=e;var u="nrmn";var a="1h";var f=null;var l=null;var c=n?n:0;var h="000000";if(c==1){f=document.createElement("div");f.style.backgroundColor="#999999";f.style.color="#000000";f.style.position="absolute";f.style.right="5px";f.style.top="400px";f.style.width="900px";f.style.height="400px";f.style.overflow="auto";f.style.zIndex=500;document.getElementsByTagName("body")[0].appendChild(f);l=document.createElement("button");l.style.position="absolute";l.style.right="5px";l.style.top="380px";l.value="Clear";l.onclick=function(){f.innerHTML=""};document.getElementsByTagName("body")[0].appendChild(l)}this.GetParamData=function(e){return s[e]?s[e]:null};this.GetData=function(t,n){u=t;a=n;var i=new AjaxObject;i.runAfterProcessingRequest=function(e){s=new Array;var t=GetMtsDataObjectJsonParseEval(e);for(var n in t){var i=t[n]["label"];s[i]=GetMtsDataObjectJsonParseEval(t[n]["data"])}r.ConvertData()};i.ProcessTextRequest(e+"/"+t+"/"+n,null,"POST")};this.ConvertData=function(){var e=new Date;var n=e.getTimezoneOffset()*6e4;var i="";for(var o in s){i=o}var a=s[i].length;s["tdew"]=new Array;s["heat"]=new Array;s["chil"]=new Array;s["barb"]=new Array;s["palt"]=new Array;s["exsr"]=new Array;s["tair32DegFLine"]=new Array;for(var f=0;f<a;f++){if(s["tair"]!==undefined){s["tdew"][f]=new Array;s["tair32DegFLine"][f]=new Array;s["tdew"][f][0]=s["tair"][f][0];s["tair32DegFLine"][f][0]=s["tair"][f][0];s["tair32DegFLine"][f][1]=32;if(s["tair"][f][1]>-900&&s["relh"][f][1]>-900){s["tdew"][f][1]=Converter.CelciusToFarenheit(GetDerivedParams.DewPointTemperature(s["tair"][f][1],s["relh"][f][1]))}else{s["tdew"][f][1]=null}s["tair"][f][1]=s["tair"][f][1]>-900?Converter.CelciusToFarenheit(s["tair"][f][1]):null;s["ta9m"][f][1]=s["ta9m"][f][1]>-900?Converter.CelciusToFarenheit(s["ta9m"][f][1]):null}if(s["rain"]!==undefined)s["rain"][f][1]=s["rain"][f][1]>-900?Converter.MillimeterToInches(s["rain"][f][1]):null;if(s["wdir"]!==undefined){if(s["wdir"][f][1]>-900){if(s["wspd"]!==undefined&&s["wspd"][f][1]>-900&&s["wspd"][f][1]<1.1){s["wdir"][f][1]=null}}else{s["wdir"][f][1]=null}}if(s["wspd"]!==undefined)s["wspd"][f][1]=s["wspd"][f][1]>-900?Converter.MetersPerSecondToMilesPerHour(s["wspd"][f][1]):null;if(s["wmax"]!==undefined)s["wmax"][f][1]=s["wmax"][f][1]>-900?Converter.MetersPerSecondToMilesPerHour(s["wmax"][f][1]):null;if(s["ws2m"]!==undefined)s["ws2m"][f][1]=s["ws2m"][f][1]>-900?Converter.MetersPerSecondToMilesPerHour(s["ws2m"][f][1]):null;if(s["ts10"]!==undefined)s["ts10"][f][1]=s["ts10"][f][1]>-900?Converter.CelciusToFarenheit(s["ts10"][f][1]):null;if(s["ts30"]!==undefined)s["ts30"][f][1]=s["ts30"][f][1]>-900?Converter.CelciusToFarenheit(s["ts30"][f][1]):null;if(s["ts05"]!==undefined)s["ts05"][f][1]=s["ts05"][f][1]>-900?Converter.CelciusToFarenheit(s["ts05"][f][1]):null;if(s["tb05"]!==undefined)s["tb05"][f][1]=s["tb05"][f][1]>-900?Converter.CelciusToFarenheit(s["tb05"][f][1]):null;if(s["tb10"]!==undefined)s["tb10"][f][1]=s["tb10"][f][1]>-900?Converter.CelciusToFarenheit(s["tb10"][f][1]):null;if(s["rtot01h"]!==undefined)s["rtot01h"][f][1]=s["rtot01h"][f][1]>-900?Converter.MillimeterToInches(s["rtot01h"][f][1]):null;if(s["relh"]!==undefined)s["relh"][f][1]=s["relh"][f][1]>-900?s["relh"][f][1]:null;if(s["th20"]!==undefined)s["th20"][f][1]=s["th20"][f][1]>-900&&s["th20"][f][1]<200?Converter.CelciusToFarenheit(s["th20"][f][1]):null;if(s["gh20"]!==undefined)s["gh20"][f][1]=s["gh20"][f][1]>-900?s["gh20"][f][1]:null;if(s["tair"]!==undefined&&s["relh"][f]!==undefined){s["heat"][f]=new Array;s["heat"][f][0]=s["tair"][f][0];if(s["tair"][f][1]!=null&&s["relh"][f][1]!=null&&s["tair"][f][1]>-900&&s["relh"][f][1]>-900){s["heat"][f][1]=GetDerivedParams.HeatIndex(s["tair"][f][1],s["relh"][f][1])}else{s["heat"][f][1]=null}s["heat"][f][1]=s["heat"][f][1]>-900?s["heat"][f][1]:null}if(s["tair"]!==undefined&&s["wspd"][f]!==undefined){s["chil"][f]=new Array;s["chil"][f][0]=s["tair"][f][0];if(s["tair"][f][1]!=null&&s["wspd"][f][1]!=null&&s["tair"][f][1]>-900&&s["wspd"][f][1]>-900){s["chil"][f][1]=GetDerivedParams.WindChill(s["tair"][f][1],s["wspd"][f][1])}else{s["chil"][f][1]=null}s["chil"][f][1]=s["chil"][f][1]>-900?s["chil"][f][1]:null}if(s["wspd"]!==undefined&&s["wdir"]!==undefined){s["barb"][f]=new Array;s["barb"][f][0]=s["wdir"][f][0];if(s["wspd"][f][1]>-900&&s["wdir"][f][1]>-900){s["barb"][f][1]=s["wspd"][f][1];s["barb"][f][2]=s["wdir"][f][1]}else{s["barb"][f][1]=null;s["barb"][f][2]=null}}if(s["pres"]!==undefined){s["palt"][f]=new Array;s["palt"][f][0]=s["pres"][f][0];if(s["pres"][f][1]>-900){s["palt"][f][1]=GetDerivedParams.SeaLevelPressure(s["pres"][f][1],t.GetSiteAttrib(u,"elev"))}else{s["pres"][f][1]=null}}if(s["srad"]!==undefined){s["srad"][f][1]=s["srad"][f][1]>-900?s["srad"][f][1]:null}s["exsr"][f]=new Array;s["exsr"][f][0]=s[i][f][0];var l=new Date(s["exsr"][f][0]+n);var c=l.getMinutes()/60;var m=l.getHours()+c;s["exsr"][f][1]=GetDerivedParams.ThereticalMaxSolarRadiation(b(l.getDate(),l.getMonth()+1,l.getYear()),m,t.GetSiteAttrib(u,"lat"),t.GetSiteAttrib(u,"lon"))}for(var o in s){for(var f=0;f<s[o].length;f++){if(s[o][f][1]!=null&&s[o][f][1]<=-900)s[o][f][1]=null}}if(s["rain"]!==undefined){s["totalRain"]=new Array;s["totalRain"][0]=new Array;s["totalRain"][0][0]=s["rain"][0][0];s["totalRain"][0][1]=0;var g=0;var y=s["rain"][0][1];var w="";p("<BR>ctr"+"- timehourmn"+"- timeUTC"+"- rain"+"- lastRainVal"+"- lastRainModVal"+"- totalRain");w=v(s["rain"][0][0]);p("<BR>0"+"- "+w+"- "+d(s["rain"][0][0])+"- "+s["rain"][0][1]+"- "+y+"- "+g+"- "+(s["totalRain"][0][1]!=null?s["totalRain"][0][1].toFixed(2):"NULL"));var E=false;for(var f=1;f<s["rain"].length;f++){s["totalRain"][f]=new Array;s["totalRain"][f][0]=s["rain"][f][0];var S=v(s["rain"][f][0]);if(S==h){if(E==false&&s["rain"][f][1]==null){p("<BR>"+f+": errorWithData=true");E=true}}if(E==true){s["totalRain"][f][1]=null}else{if(s["rain"][f][1]!=null){if(s["rain"][f][1]==0&&y!=0){s["totalRain"][f][1]=g}else{if(w==h){p("<BR>totalRain "+s["rain"][f][1]+" + "+g);s["totalRain"][f][1]=s["rain"][f][1]+g;p("<BR>totalRain "+s["totalRain"][f][1])}else{var x=s["rain"][f][1]-y;if(x<0)x=s["rain"][f][1];s["totalRain"][f][1]=g+x}}g=s["totalRain"][f][1];y=s["rain"][f][1];w=S}else s["totalRain"][f][1]=null;p("<BR>"+f+"- "+S+"- "+d(s["rain"][f][0])+"- "+s["rain"][f][1]+"- "+y+"- "+g+"- "+(s["totalRain"][f][1]!=null?s["totalRain"][f][1].toFixed(2):"NULL"))}}}r.RunAfterGettingData()};this.RunAfterGettingData=function(){};var g=new m(0,31,59,90,120,151,181,212,243,273,304,334);var y=new m(0,31,60,91,121,152,182,213,244,274,305,335)}